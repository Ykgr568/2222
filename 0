-- Robloxè„šæœ¬ä¸­å¿ƒ - åŠ¨æ€åŠ è½½è„šæœ¬ç•Œé¢
-- å°†æœ¬è„šæœ¬æ”¾å…¥StarterPlayerScriptsä¸­

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- åˆ›å»ºä¸»ç•Œé¢
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ScriptHub"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = player:WaitForChild("PlayerGui")

-- ä¸»å®¹å™¨æ¡†æ¶
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 400, 0, 500)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -250)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- åœ†è§’æ•ˆæœ
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)
UICorner.Parent = MainFrame

-- æ ‡é¢˜æ 
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 40)
TitleBar.Position = UDim2.new(0, 0, 0, 0)
TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Name = "TitleLabel"
TitleLabel.Size = UDim2.new(1, -20, 1, 0)
TitleLabel.Position = UDim2.new(0, 10, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "å­¤æœˆæ˜Ÿæ–°ç¼åˆè„šæœ¬ä¸­å¿ƒ"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.TextSize = 18
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

-- å…³é—­æŒ‰é’®
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -35, 0.5, -15)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
CloseButton.BorderSizePixel = 0
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 14
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 4)
CloseCorner.Parent = CloseButton

-- è„šæœ¬åˆ—è¡¨å®¹å™¨
local ScrollFrame = Instance.new("ScrollingFrame")
ScrollFrame.Name = "ScrollFrame"
ScrollFrame.Size = UDim2.new(1, -20, 1, -120)
ScrollFrame.Position = UDim2.new(0, 10, 0, 50)
ScrollFrame.BackgroundTransparency = 1
ScrollFrame.ScrollBarThickness = 8
ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
ScrollFrame.Parent = MainFrame

local ScriptListLayout = Instance.new("UIListLayout")
ScriptListLayout.Padding = UDim.new(0, 10)
ScriptListLayout.Parent = ScrollFrame

-- åº•éƒ¨æç¤ºåŒºåŸŸ
local HintFrame = Instance.new("Frame")
HintFrame.Name = "HintFrame"
HintFrame.Size = UDim2.new(1, -20, 0, 60)
HintFrame.Position = UDim2.new(0, 10, 1, -70)
HintFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
HintFrame.BorderSizePixel = 0
HintFrame.Parent = MainFrame

local HintCorner = Instance.new("UICorner")
HintCorner.CornerRadius = UDim.new(0, 6)
HintCorner.Parent = HintFrame

local HintLabel = Instance.new("TextLabel")
HintLabel.Name = "HintLabel"
HintLabel.Size = UDim2.new(1, -20, 1, -10)
HintLabel.Position = UDim2.new(0, 10, 0, 5)
HintLabel.BackgroundTransparency = 1
HintLabel.Text = "ğŸ’¡ æ·»åŠ è„šæœ¬æŒ‡å¼•ï¼šå°†è‡ªå®šä¹‰è„šæœ¬æ”¾å…¥ã€ŒReplicatedStorage/ScriptLoaderã€æ–‡ä»¶å¤¹ä¸­å³å¯è‡ªåŠ¨åŠ è½½"
HintLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
HintLabel.TextSize = 12
HintLabel.Font = Enum.Font.Gotham
HintLabel.TextWrapped = true
HintLabel.TextXAlignment = Enum.TextXAlignment.Left
HintLabel.Parent = HintFrame

-- å…³é—­æŒ‰é’®åŠŸèƒ½
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = false
end)

-- åˆ›å»ºè„šæœ¬æŒ‰é’®æ¨¡æ¿
local function CreateScriptButton(scriptName, index)
    local Button = Instance.new("TextButton")
    Button.Name = "ScriptButton_" .. scriptName
    Button.Size = UDim2.new(1, 0, 0, 50)
    Button.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
    Button.BorderSizePixel = 0
    Button.Text = ""
    
    local ButtonCorner = Instance.new("UICorner")
    ButtonCorner.CornerRadius = UDim.new(0, 6)
    ButtonCorner.Parent = Button
    
    local ScriptNameLabel = Instance.new("TextLabel")
    ScriptNameLabel.Name = "ScriptName"
    ScriptNameLabel.Size = UDim2.new(1, -20, 0.6, 0)
    ScriptNameLabel.Position = UDim2.new(0, 10, 0, 5)
    ScriptNameLabel.BackgroundTransparency = 1
    ScriptNameLabel.Text = scriptName
    ScriptNameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    ScriptNameLabel.TextSize = 14
    ScriptNameLabel.Font = Enum.Font.GothamBold
    ScriptNameLabel.TextXAlignment = Enum.TextXAlignment.Left
    ScriptNameLabel.Parent = Button
    
    local StatusLabel = Instance.new("TextLabel")
    StatusLabel.Name = "Status"
    StatusLabel.Size = UDim2.new(1, -20, 0.4, 0)
    StatusLabel.Position = UDim2.new(0, 10, 0.6, 0)
    StatusLabel.BackgroundTransparency = 1
    StatusLabel.Text = "ç‚¹å‡»åŠ è½½è„šæœ¬"
    StatusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    StatusLabel.TextSize = 12
    StatusLabel.Font = Enum.Font.Gotham
    StatusLabel.TextXAlignment = Enum.TextXAlignment.Left
    StatusLabel.Parent = Button
    
    -- æ‚¬åœæ•ˆæœ
    Button.MouseEnter:Connect(function()
        Button.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
    end)
    
    Button.MouseLeave:Connect(function()
        Button.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
    end)
    
    return Button
end

-- åŠ è½½è„šæœ¬æ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬
local function LoadScripts()
    -- æ¸…ç©ºç°æœ‰è„šæœ¬åˆ—è¡¨
    for _, child in ipairs(ScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    local ScriptLoaderFolder = ReplicatedStorage:FindFirstChild("ScriptLoader")
    if not ScriptLoaderFolder then
        -- åˆ›å»ºæç¤ºè„šæœ¬æ–‡ä»¶å¤¹
        local HintButton = CreateScriptButton("æœªæ‰¾åˆ°è„šæœ¬æ–‡ä»¶å¤¹", 1)
        HintButton.Parent = ScrollFrame
        
        local Status = HintButton:FindFirstChild("Status")
        if Status then
            Status.Text = "è¯·åœ¨ReplicatedStorageä¸­åˆ›å»ºScriptLoaderæ–‡ä»¶å¤¹"
            Status.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
        return
    end
    
    local scriptCount = 0
    local totalHeight = 0
    
    for _, scriptObj in ipairs(ScriptLoaderFolder:GetChildren()) do
        if scriptObj:IsA("ModuleScript") or scriptObj:IsA("Script") then
            scriptCount = scriptCount + 1
            
            local Button = CreateScriptButton(scriptObj.Name, scriptCount)
            Button.Parent = ScrollFrame
            
            totalHeight = totalHeight + 60
            
            -- ç»‘å®šç‚¹å‡»äº‹ä»¶
            Button.MouseButton1Click:Connect(function()
                local Status = Button:FindFirstChild("Status")
                if Status then
                    Status.Text = "æ‰§è¡Œä¸­..."
                    Status.TextColor3 = Color3.fromRGB(100, 255, 100)
                end
                
                -- æ‰§è¡Œè„šæœ¬é€»è¾‘
                if scriptObj:IsA("ModuleScript") then
                    local success, result = pcall(function()
                        local module = require(scriptObj)
                        if type(module) == "table" and module.Run then
                            module.Run(player)
                        end
                        return true
                    end)
                    
                    if Status then
                        if success then
                            Status.Text = "æ‰§è¡ŒæˆåŠŸ"
                            Status.TextColor3 = Color3.fromRGB(100, 255, 100)
                        else
                            Status.Text = "æ‰§è¡Œå¤±è´¥"
                            Status.TextColor3 = Color3.fromRGB(255, 100, 100)
                        end
                    end
                elseif scriptObj:IsA("Script") then
                    -- å¤åˆ¶è„šæœ¬åˆ°ç©å®¶GUIæ‰§è¡Œ
                    local newScript = scriptObj:Clone()
                    newScript.Parent = player.PlayerGui
                    
                    if Status then
                        Status.Text = "å·²åŠ è½½åˆ°ç©å®¶GUI"
                        Status.TextColor3 = Color3.fromRGB(100, 255, 100)
                    end
                end
            end)
        end
    end
    
    -- æ›´æ–°æ»šåŠ¨åŒºåŸŸå¤§å°
    ScrollFrame.CanvasSize = UDim2.new(0, 0, 0, totalHeight)
    
    if scriptCount == 0 then
        local HintButton = CreateScriptButton("æš‚æ— å¯ç”¨è„šæœ¬", 1)
        HintButton.Parent = ScrollFrame
        
        local Status = HintButton:FindFirstChild("Status")
        if Status then
            Status.Text = "åœ¨ScriptLoaderæ–‡ä»¶å¤¹ä¸­æ·»åŠ è„šæœ¬"
            Status.TextColor3 = Color3.fromRGB(255, 200, 100)
        end
    end
end

-- åˆå§‹åŠ è½½è„šæœ¬
LoadScripts()

-- å®šæœŸæ£€æŸ¥è„šæœ¬æ›´æ–°ï¼ˆæ¯10ç§’ï¼‰
while true do
    wait(10)
    LoadScripts()
end
